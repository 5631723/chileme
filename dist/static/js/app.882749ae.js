(function(t){function e(e){for(var a,o,i=e[0],c=e[1],l=e[2],u=0,d=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);f&&f(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var i=n[o];0!==s[i]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},o={app:0},s={app:0},r=[];function i(t){return c.p+"static/js/"+({}[t]||t)+"."+{"chunk-04900ecc":"047e5ef9"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-04900ecc":1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var a="static/css/"+({}[t]||t)+"."+{"chunk-04900ecc":"4c2209fd"}[t]+".css",s=c.p+a,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var l=r[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===s))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===a||u===s)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||s,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete o[t],f.parentNode.removeChild(f),n(r)},f.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[t]=0})));var a=s[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,n){a=s[t]=[e,n]}));e.push(a[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(f);var n=s[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",d.name="ChunkLoadError",d.type=a,d.request=o,n[1](d)}s[t]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var f=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],r=(n("5c0b"),n("2877")),i={},c=Object(r["a"])(i,o,s,!1,null,null,null),l=c.exports,u=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("h1",[n("i",{staticClass:"el-icon-eleme"}),t._v(" 吃了么点餐管理系统 ")]),n("div",{staticClass:"status"},[n("span",[t._v(t._s(t.times))]),n("span",[t._v(t._s(t.user)+"老板，欢迎您！")])])]),n("el-container",[n("el-aside",{staticClass:"nav-bg",attrs:{width:"80px"}},[n("ul",[n("li",{staticClass:"active"},[n("i",{staticClass:"el-icon-s-platform"}),n("span",[t._v("收银")])]),n("li",[n("i",{staticClass:"el-icon-s-custom"}),n("span",[t._v("会员")])]),n("li",[n("i",{staticClass:"el-icon-s-goods"}),n("span",[t._v("库存")])]),n("li",[n("i",{staticClass:"el-icon-s-grid"}),n("span",[t._v("换班")])]),n("li",[n("i",{staticClass:"el-icon-s-data"}),n("span",[t._v("报表")])]),n("li",{on:{click:t.loginOut}},[n("i",{staticClass:"el-icon-error"}),n("span",[t._v("退出")])])])]),n("el-aside",{staticClass:"order-bg",attrs:{width:"500px"}},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"点餐",name:"1"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:!0,stripe:!0}},[n("el-table-column",{attrs:{label:"商品名称",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.goodsName)+" ")]}}])}),n("el-table-column",{attrs:{label:"数量",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.count)+" ")]}}])}),n("el-table-column",{attrs:{label:"价格",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.price)+".00 ")]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleReduce(e.$index,e.row)}}},[t._v("减少")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),n("div",{staticClass:"total"},[n("span",[t._v("数量："+t._s(t.totalCount)+" 件")]),n("span",[t._v("总价："+t._s(t.totalPrice)+"元")])]),n("div",{staticClass:"btns"},[n("el-button",{attrs:{size:"medium",type:"danger"},on:{click:t.clearAll}},[t._v("清空")]),n("el-button",{attrs:{size:"medium",type:"success"}},[t._v("结账")])],1)],1),n("el-tab-pane",{attrs:{label:"订单列表",name:"2"}},[t._v("订单列表")])],1)],1),n("el-main",[n("div",{staticClass:"top-hd"},[t._v("热卖商品")]),t.goodsList&&t.goodsList.length>0?n("div",{staticClass:"goods-list"},t._l(t.goodsList,(function(e){return n("div",{key:e.id,staticClass:"goods",on:{click:function(n){return t.addGoods(e)}}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.goodsImg,fit:"cover"}}),n("div",{staticClass:"info"},[n("h4",[t._v(t._s(e.goodsName))]),n("span",[t._v(t._s(e.price)+".00元")])])],1)})),0):n("el-empty",{attrs:{"image-size":200}})],1)],1)],1)},f=[],p=(n("159b"),n("7db0"),n("a434"),n("ac1f"),n("5319"),n("99af"),n("4d90"),n("25f0"),{data:function(){return{times:"",user:sessionStorage.getItem("USER"),activeName:"1",tableData:[],goodsList:[]}},computed:{totalCount:function(){var t=0;return this.tableData.forEach((function(e){t+=e.count})),t},totalPrice:function(){var t=0;return this.tableData.forEach((function(e){t+=e.count*e.price})),t}},created:function(){var t=this;this.getGoodsData(),setInterval((function(){t.times=t.formatTime()}),1e3)},methods:{getGoodsData:function(){var t=this;this.$http.get("/goods/goodsList").then((function(e){console.log(e),t.goodsList=e.data}))},addGoods:function(t){var e=this.tableData.find((function(e){return e.goodsName==t.goodsName}));e?t.count++:(t.count=1,this.tableData.push(t))},handleReduce:function(t,e){e.count<=1||e.count--},handleDelete:function(t,e){var n=this;this.$confirm("此操作将永久删除当前商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.tableData.splice(t,1),n.$message({type:"success",message:"删除成功!"})})).catch((function(){n.$message({type:"info",message:"已取消"})}))},clearAll:function(){var t=this;this.$confirm("此操作将永久清空所有商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableData=[],t.$message({type:"success",message:"清除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消清空"})}))},loginOut:function(){var t=this;this.$confirm("是否要退出系统?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){sessionStorage.clear("ELM_TOKEN"),sessionStorage.clear("USER"),t.$router.replace("/login")})).catch((function(){t.$message({type:"info",message:"已取消"})}))},formatTime:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),o=t.getHours(),s=t.getMinutes(),r=t.getSeconds();return"".concat(e,"年").concat(n,"月").concat(a,"日 ").concat(o.toString().padStart(2,"0"),"时").concat(s.toString().padStart(2,"0"),"分").concat(r.toString().padStart(2,"0"),"秒")}}}),g=p,m=(n("f660"),Object(r["a"])(g,d,f,!1,null,"199cfb7b",null)),h=m.exports;a["default"].use(u["a"]);var v=[{path:"/",name:"Home",component:h},{path:"/login",name:"Login",component:function(){return n.e("chunk-04900ecc").then(n.bind(null,"a55b"))}}],b=new u["a"]({mode:"history",routes:v});b.beforeEach((function(t,e,n){var a=sessionStorage.getItem("ELM_TOKEN");a||"/login"===t.path?n():n("/login")}));var y=b,_=n("2f62");a["default"].use(_["a"]);var w,S=new _["a"].Store({state:{},mutations:{},actions:{},modules:{}}),C=n("5c96"),k=n.n(C),x=(n("0fae"),n("bc3a")),O=n.n(x),E=O.a.create({baseURL:"https://8c0ca265-f640-4eda-a886-92bd742a95fa.bspapp.com/http",timeout:0,headers:{"content-type":"application/x-www-form-urlencoded"}});E.interceptors.request.use((function(t){w=C["Loading"].service({fullscreen:!0,background:"rgba(0,0,0,0.5)",spinner:"el-icon-loading",text:"加载中……"});var e=sessionStorage.getItem("ELM_TOKEN");return e&&(t.headers["token"]=e),t}),(function(t){return Promise.reject(t)})),E.interceptors.response.use((function(t){if(w.close(),console.log(t.data),2===t.data.code)Object(C["Message"])({message:t.data.msg||"获取成功",type:"success"});else{if(0===t.data.code)return void Object(C["Message"])({message:t.data.msg,type:"warning"});4===t.data.code&&(Object(C["Message"])({message:t.data.msg,type:"warning"}),window.location.replace("/login"))}return t.data}),(function(t){return 400==t.response.status&&Object(C["Message"])({message:"请求错误，请刷新后重试",type:"warning"}),Promise.reject(t)}));var j=E;a["default"].prototype.$http=j,a["default"].use(k.a),a["default"].config.productionTip=!1,new a["default"]({router:y,store:S,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"9c0c":function(t,e,n){},d937:function(t,e,n){},f660:function(t,e,n){"use strict";n("d937")}});
//# sourceMappingURL=app.882749ae.js.map